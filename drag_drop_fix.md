# 拖放测试修复

## ✅ 问题已修复

**错误原因**：
1. `QDropEvent` 没有 `pos()` 方法
2. `QTextEdit` 没有 `cursorForPosition()` 方法

**修复方案**：
1. 移除了对 `event.pos()` 的调用
2. 使用 `self.editor.textCursor()` 在当前光标位置插入
3. 添加了 `_get_optimal_image_path()` 方法来智能选择路径格式

## 🧪 测试方法

1. 启动 PyMD Editor
2. 从文件管理器拖拽图片文件到编辑器
3. 应该会在光标位置插入 `![文件名](路径)` 格式的Markdown语法
4. 不再出现错误信息

## 📋 功能特点

- **智能路径**：优先使用相对路径，跨盘符时使用绝对路径
- **光标插入**：在当前光标位置插入图片语法
- **格式支持**：PNG, JPG, JPEG, GIF, BMP, SVG
- **自动预览**：插入后自动更新预览

拖放功能现在应该正常工作了！